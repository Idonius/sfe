<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/templateBill.xhtml">


        <ui:define name="title">
            <h:outputText value="Inicio"></h:outputText>
        </ui:define>

        <ui:define name="body">
        	
        	<f:metadata>
			    <f:viewAction action="#{billerController.init}" />
			</f:metadata>
        	
	        <h:form id="billForm" onkeypress="if (event.keyCode == 13) { document.getElementById('billForm:find').click(); return false; }">
	            <p:panel header="Factura">
	            	<p:fieldset legend="Emisor" toggleable="true" toggleSpeed="500">
		            	<p:panelGrid columns="3" styleClass="noBorder transparentBackground"  style="width:100%;" >
		           			<p:panelGrid columns="1" styleClass="noBorder transparentBackground" style="text-align:center; width:100%;" >
		           				<p:graphicImage value="#{loginManager.active.useImage}" width="70px" height="70px"></p:graphicImage>
		                    </p:panelGrid>
		            		<p:panelGrid columns="1" styleClass="noBorder transparentBackground" style="text-align:center; width:100%;" >
		                        <h:outputText value="#{loginManager.active.useComName}" style="font-size:30px;" />
		                        <p:separator />
		                        <p:outputLabel value="#{loginManager.active.useFirstName} #{loginManager.active.useLastName}"/>
		                    </p:panelGrid>
		                    <p:panelGrid columns="1" styleClass="noBorder transparentBackground" style="text-align:center; width:100%;" >
		                    	<p:panelGrid columns="1" styleClass="noBorder transparentBackground" style="text-align:center; width:100%;" >
		                    		<h:outputText value="R.U.C #{loginManager.active.useRuc}" />
		                    		<h:outputText value="FACTURA #{loginManager.active.useLocalCode}-#{loginManager.active.useEmissionPoint}" />
		                    		<h:outputText value="#{billerController.showBillNumber()}" style="font-size: 20px; color:red;" >
		                    			<f:convertNumber pattern="0000000"/>
		                    		</h:outputText>
		                    	</p:panelGrid>
		                    </p:panelGrid>
		                </p:panelGrid>
	                </p:fieldset>
	                <p:fieldset legend="Cliente" toggleable="true" toggleSpeed="500">
		                <p:panelGrid id="info"  columns="3" styleClass="noBorder transparentBackground"  style="width:100%;" >
		                	<p:panelGrid columns="2" styleClass="noBorder transparentBackground" style="width:20%;" >
		                		<h:outputText value="Id Cliente:" />
		                		<br />
		                		<p:inputText id="save" value="#{billerController.idClient}" style="width:100px;">
		     		           		<p:ajax event="blur" listener="#{billerController.findClient}" update=":ClientEditForm:display" /> 
						      	</p:inputText> 
						      	<p:commandButton actionListener="#{billerController.findClient}" id="edit" update=":ClientEditForm:display" icon="ui-icon-search" title="Icon Only"  />
		                	</p:panelGrid>
		                	<p:panelGrid columns="1" styleClass="noBorder transparentBackground" rendered="#{billerController.bill.cliCode != null}">
		                		<p:panelGrid columns="4" styleClass="noBorder transparentBackground"  style="width:100%;" rendered="#{billerController.bill.cliCode != null}">
			                		<h:outputText value="Nombre:" style="font-weight: bold;"/>
			                		<h:outputText value="#{billerController.bill.cliCode.cliFirstName} #{billerController.bill.cliCode.cliLastName}"/>
			                		<h:outputText value="CI / RUC:"  style="font-weight: bold;"/>
			                		<h:outputText value="#{billerController.bill.cliCode.cliId}"/>
			                	</p:panelGrid>
			                	<p:panelGrid columns="4" styleClass="noBorder transparentBackground"  style="width:100%;" rendered="#{billerController.bill.cliCode != null}">
			                		<h:outputText value="DirecciÃ³n:"  style="font-weight: bold;"/>
			                		<h:outputText value="#{billerController.bill.cliCode.cliAddr}"/>
			                	</p:panelGrid>
		                	</p:panelGrid>
		                	<p:panelGrid columns="1" styleClass="noBorder transparentBackground" rendered="#{billerController.bill.cliCode != null}" style="width:20%;" >
						      	<p:commandButton actionListener="#{billerController.editClient}" value="Editar Cliente" id="find" update=":ClientEditForm:display" icon="ui-icon-pencil"/>
		                	</p:panelGrid>
		                </p:panelGrid>
	                </p:fieldset>
	            </p:panel>
	        </h:form>
	        <ui:include src="Edit.xhtml"/>
        </ui:define>
    </ui:composition>

</html>
